<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zomyto WalletConnect + Permit</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<style>
  body { background:#121212; color:white; font-family:Arial; text-align:center; padding-top:50px; }
  button { background:#1e88e5; color:white; padding:15px 25px; border:none; border-radius:8px; font-size:1.2rem; cursor:pointer; margin-top:20px; }
  button:disabled { background:grey; cursor: not-allowed; }
  #qrContainer { margin-top:30px; }
</style>
</head>
<body>

<h1>Zomyto WalletConnect Test</h1>

<button id="connectBtn">ðŸ”— Connect Wallet</button>
<div id="qrContainer"></div>
<p id="walletAddress"></p>

<script>
let provider, signer;

// Vul hier je WalletConnect Project ID in
const projectId = "0e7d96df89f873ddfb0b4381e13c883c";

// RPC voor Ethereum Mainnet
const rpc = {
  1: "https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID" // Vervang door je Infura ID
};

document.getElementById("connectBtn").onclick = async () => {
  try {
    const wcProvider = new WalletConnectProvider.default({
      projectId,
      chains: [1], // Ethereum Mainnet
      rpc
    });

    // Start connectie
    await wcProvider.enable();

    // ethers provider
    provider = new ethers.providers.Web3Provider(wcProvider);
    signer = provider.getSigner();

    const addr = await signer.getAddress();
    document.getElementById("walletAddress").innerText = "Connected wallet: " + addr;

    // QR-code laten zien als backup
    const qrUrl = `https://scan.walletconnect.com/?clientMeta.name=Zomyto&projectId=${projectId}`;
    QRCode.toCanvas(document.getElementById("qrContainer"), qrUrl, function (error) {
      if (error) console.error(error);
    });

    alert("Wallet verbonden! âœ…");
  } catch (err) {
    console.error(err);
    alert("Fout bij connect: " + err.message);
  }
};
</script>

</body>
</html>
